---
- name: Enable the interfaces
  junos_interface:
    name: "{{ item.key }}"
    enabled: True
  when: item.value.private_ip_address | ipaddr
  with_dict: "{{ interfaces }}"
  connection: netconf

- name: Add interfaces to the VRF
  junos_vrf:
    name: "{{ item.name }}"
    interfaces: "{{ item.interfaces }}"
  with_items: "{{ vrf_list | default([]) }}"
  connection: netconf

- name: Set Interface IP
  junos_l3_interface:
    name: "{{ item.key }}"
    ipv4: "{{ item.value.private_ip_address }}/24"
  when: item.value.private_ip_address | ipaddr
  with_dict: "{{ interfaces }}"
  connection: netconf
