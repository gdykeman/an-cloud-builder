---
demo_name: f5-demo1
cloud_name: "{{ demo_instance | default(lookup('env','USER')) }}-{{ demo_name }}"
cloud_provider: aws
cloud_region: us-east-1
cloud_user: ec2-user
ansible_ssh_private_key_file: "{{ playbook_dir }}/keys/{{ cloud_name }}_key"

acl_dict:
  apphost-acl:
    - { src_ip: 0.0.0.0/0, dst_ports: 22, proto: tcp }
    - { src_ip: 0.0.0.0/0, dst_ports: 443, proto: tcp }
    - { src_ip: 0.0.0.0/0, proto: icmp }
  f5-acl:
    - { src_ip: 0.0.0.0/0, proto: all }
ssh_keys: "{ '{{ cloud_name }}': '{{ lookup('file', '{{ ansible_ssh_private_key_file }}.pub') }}' }"
vpc_list:
  - name: "{{ cloud_name }}-vpc"
    provider: "{{ cloud_provider }}"
    region: "{{ cloud_region }}"
    project: "{{ cloud_name }}"
    cidr: 172.18.0.0/16
    acl_list:
      - apphost-acl
      - f5-acl
    networks:
      - { name: "{{ cloud_name }}-mgmt", cidr: "172.18.0.0/24", az: "{{ cloud_region }}a" }
      - { name: "{{ cloud_name }}-outside", cidr: "172.18.1.0/24", az: "{{ cloud_region }}a" }
      - { name: "{{ cloud_name }}-inside", cidr: "172.18.2.0/24", az: "{{ cloud_region }}a" }
    instances:
      - name: "{{ cloud_name }}-control"
        size: medium
        image: centos7
        cloud_user: centos
        key_name: "{{ cloud_name }}"
        interfaces:
          - subnet: "{{ cloud_name }}-mgmt"
            acl: apphost-acl
            public_ip: true
        tags:
          Owner: "{{ cloud_name }}"
          groups: control
      - name: "{{ cloud_name }}-host1"
        size: micro
        image: centos7
        cloud_user: centos
        key_name: "{{ cloud_name }}"
        interfaces:
          - subnet: "{{ cloud_name }}-inside"
            acl: apphost-acl
            public_ip: false
        tags:
          Owner: "{{ cloud_name }}"
          groups: webserver
      - name: "{{ cloud_name }}-host2"
        size: micro
        image: centos7
        cloud_user: centos
        key_name: "{{ cloud_name }}"
        interfaces:
          - subnet: "{{ cloud_name }}-inside"
            acl: apphost-acl
            public_ip: false
        tags:
          Owner: "{{ cloud_name }}"
          groups: webserver
      - name: "{{ cloud_name }}-F5"
        size: medium
        image: f5-25-good
        key_name: "{{ cloud_name }}"
        ansible_user: admin
        interfaces:
          - name: mgmt
            subnet: "{{ cloud_name }}-mgmt"
            acl: f5-acl
            private_ip: 172.18.0.254
            public_ip: true
          - name: eth0
            subnet: "{{ cloud_name }}-outside"
            acl: f5-acl
            private_ip: 172.18.1.254
            public_ip: true
          - name: eth1
            subnet: "{{ cloud_name }}-inside"
            acl: f5-acl
            private_ip: 172.18.2.254
        tags:
          Owner: "{{ cloud_name }}"
          network_os: f5
          groups: network,f5

group_vars:
  network:
    network_username: admin
    # Use Ansible Vault when encryption is required:
    network_password: Cisc0123

cloud_image_map:
  aws:
    us-east-1:
      rhel7: ami-c998b6b2
      f5-25-good: ami-18ab2462
      centos7: ami-61bbf104
    us-east-2:
      rhel7: ami-0932686c
    us-west-1:
      rhel7: ami-66eec506
    us-west-2:
      rhel7:  ami-9fa343e7
    ca-central-1:
      rhel7: ami-9062d0f4
  azure:
    eastus:
      rhel7: { offer: CentOS, publisher: OpenLogic, sku: 7.4, version: latest }
    westus:
      rhel7: { offer: CentOS, publisher: OpenLogic, sku: 7.4, version: latest }

cloud_instance_map:
  aws:
    us-east-1:
      micro: t2.micro
      medium: t2.medium
      pan-small: m4.xlarge
    us-east-2:
      micro: t2.micro
      medium: t2.medium
    us-west-1:
      micro: t2.micro
      medium: t2.medium
    us-west-2:
      micro: t2.micro
      medium: t2.medium
    ca-central-1:
      micro: t2.micro
      medium: t2.medium
  azure:
    eastus:
      micro: Standard_A0
      medium: Standard_A2_v2
    westus:
      micro: Standard_A0
      medium: Standard_A2_v2
